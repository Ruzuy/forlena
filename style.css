/* =========================
   THEME / BASE
========================= */
:root{
    --card-bg: rgba(255,255,255,.88);
    --shadow: 0 16px 40px rgba(0,0,0,.22);
    --shadow-soft: 0 10px 22px rgba(0,0,0,.18);
    --radius: 20px;

    --green: #198754;
    --green-dark: #0f5132;
    --red: #dc3545;

    --text: #1b1b1b;
    --muted: rgba(0,0,0,.55);

    --blur: 10px;
}

*{ box-sizing: border-box; }

html, body { height: 100%; }

body{
    margin: 0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    color: var(--text);

    /* Фон */
    background-image: url("./assets/bg.jpg");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;

    /* Чтобы не прыгало на мобильных адресных строках */
    min-height: 100dvh;
    overflow-x: hidden;
}

/* Затемнение + легкий градиент поверх фоновой картинки */
.valentine{
    min-height: 100dvh;
    padding: max(16px, env(safe-area-inset-top)) 16px max(16px, env(safe-area-inset-bottom));
    display: grid;
    place-items: center;
    position: relative;

    background:
            radial-gradient(800px 600px at 20% 10%, rgba(255,255,255,.25), transparent 70%),
            radial-gradient(700px 500px at 80% 90%, rgba(255,255,255,.18), transparent 70%),
            rgba(0,0,0,.24);
}

/* =========================
   FLOATING HEARTS BACKGROUND
========================= */
.hearts{
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
    z-index: 0;
}

.heart{
    position: absolute;
    width: 14px;
    height: 14px;
    transform: rotate(45deg);
    opacity: .25;
    filter: blur(.1px);
    animation: floatUp linear infinite;
}

.heart::before,
.heart::after{
    content:"";
    position:absolute;
    width: 14px;
    height: 14px;
    background: currentColor;
    border-radius: 50%;
}

.heart{
    background: currentColor;
}
.heart::before{ left: -7px; }
.heart::after { top: -7px; }

@keyframes floatUp{
    0%   { transform: translateY(110%) rotate(45deg) scale(.9); opacity: 0; }
    10%  { opacity: .25; }
    100% { transform: translateY(-140%) rotate(45deg) scale(1.2); opacity: 0; }
}

/* =========================
   CARD
========================= */
.cardish{
    width: min(540px, 100%);
    background: var(--card-bg);
    border-radius: var(--radius);
    padding: 18px;
    box-shadow: var(--shadow);
    position: relative;
    overflow: hidden;
    z-index: 1;

    backdrop-filter: blur(var(--blur));
    -webkit-backdrop-filter: blur(var(--blur));

    animation: cardIn 520ms ease both;
}

@keyframes cardIn{
    0% { transform: translateY(14px) scale(.98); opacity: 0; }
    100%{ transform: translateY(0) scale(1); opacity: 1; }
}

/* светлое “сияние” */
.cardish::before{
    content:"";
    position:absolute;
    inset:-2px;
    background: radial-gradient(500px 220px at 30% 10%, rgba(255, 182, 193, .35), transparent 60%);
    pointer-events:none;
}

.question{
    margin: 0 0 14px;
    text-align: center;
    font-weight: 900;
    letter-spacing: -0.02em;
    font-size: clamp(20px, 4.2vw, 30px);
    text-transform: lowercase;
}

.subtitle{
    margin: -6px 0 12px;
    text-align:center;
    color: var(--muted);
    font-size: 14px;
}

/* =========================
   IMAGE
========================= */
.image-wrap{
    display: grid;
    place-items: center;
    margin-bottom: 14px;
}

.center-image{
    width: min(320px, 86%);
    height: auto;
    border-radius: 18px;
    box-shadow: var(--shadow-soft);
    user-select: none;
    -webkit-user-drag: none;

    animation: picPop 700ms cubic-bezier(.2,.9,.2,1) both;
}

@keyframes picPop{
    0% { transform: scale(.95); opacity: 0; }
    100%{ transform: scale(1); opacity: 1; }
}

/* =========================
   BUTTONS
========================= */
.buttons-wrap{
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 14px;
    margin-top: 6px;
    padding: 10px 0 0;
    height: 96px;
}

.btn{
    border-radius: 999px !important;
}

/* Зеленая */
.yes-btn{
    font-weight: 900;
    font-size: 18px;
    padding: 12px 28px;
    transform-origin: center;
    transition: transform 180ms ease, filter 180ms ease;
    position: relative;
    box-shadow: 0 10px 20px rgba(25,135,84,.25);
}

/* постоянный нежный пульс (можно убрать по prefers-reduced-motion) */
.yes-btn.pulse{
    animation: yesPulse 1.4s ease-in-out infinite;
}
@keyframes yesPulse{
    0%, 100% { transform: translateY(0) scale(1); filter: brightness(1); }
    50%      { transform: translateY(-1px) scale(1.03); filter: brightness(1.05); }
}

.yes-btn:active{
    transform: scale(.98);
}

/* Красная */
.no-btn{
    position: relative;
    font-weight: 900;
    font-size: 16px;
    padding: 10px 22px;
    transition: transform 160ms ease, opacity 240ms ease, left 220ms ease, top 220ms ease;
}

.no-btn.shake{
    animation: shake 240ms ease;
}
@keyframes shake{
    0%{ transform: translateX(0); }
    25%{ transform: translateX(-5px); }
    50%{ transform: translateX(5px); }
    75%{ transform: translateX(-3px); }
    100%{ transform: translateX(0); }
}

/* "Нет" убегает ТОЛЬКО внутри карточки */
.no-btn.is-running{
    position: absolute;
    z-index: 3;
}

/* =========================
   FINAL TEXT + TRANSFORMS
========================= */
.final-text{
    margin-top: 12px;
    text-align: center;
    font-weight: 1000;
    letter-spacing: -0.02em;
    font-size: clamp(22px, 5vw, 36px);
    color: var(--green-dark);
    min-height: 46px;
}

.fade-pop{ animation: fadePop 420ms ease forwards; }
@keyframes fadePop{
    0% { opacity: 0; transform: translateY(8px) scale(.98); }
    100%{ opacity: 1; transform: translateY(0) scale(1); }
}

.yes-disappear{
    animation: yesVanish 560ms cubic-bezier(.2,.9,.2,1) forwards;
}
@keyframes yesVanish{
    0%   { transform: scale(1); opacity: 1; }
    50%  { transform: scale(1.25); opacity: .35; }
    100% { transform: scale(.88); opacity: 0; }
}

/* =========================
   CONFETTI (absolute overlay)
========================= */
.confetti-layer{
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 10000;
    overflow: hidden;
}

.confetti{
    position: absolute;
    width: 10px;
    height: 14px;
    border-radius: 3px;
    opacity: .95;
    animation: confettiFall 900ms ease-out forwards;
}

@keyframes confettiFall{
    0%   { transform: translateY(-20vh) rotate(0deg); opacity: 0; }
    10%  { opacity: .95; }
    100% { transform: translateY(110vh) rotate(440deg); opacity: 0; }
}

/* =========================
   MOBILE
========================= */
@media (max-width: 420px){
    .buttons-wrap{
        height: 112px;
        gap: 12px;
    }
    .yes-btn{ font-size: 17px; padding: 12px 24px; }
    .no-btn { font-size: 15px; padding: 10px 18px; }
}

/* =========================
   ACCESSIBILITY: reduced motion
========================= */
@media (prefers-reduced-motion: reduce){
    .cardish, .center-image, .yes-btn.pulse, .heart, .confetti{
        animation: none !important;
        transition: none !important;
    }
}
